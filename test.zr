func run_test[x: String] : Void
    c.printf("\033[93mBuilding %s...\033[0m", x)
    let cmd: String = str.concat("./target/release/zern examples/", x)

    let build_start_time: I64 = os.time()
    if c.system(cmd) != 0
        c.exit(1)
    let build_end_time: I64 = os.time()

    c.free(cmd)
    c.printf(" %ldms\n", build_end_time - build_start_time)

    if c.strcmp(x, "guess_number.zr") == 0 | c.strcmp(x, "tcp_server.zr") == 0
        c.printf("\033[93mSkipping %s...\033[0m\n", x)
    else
        let run_start_time: I64 = os.time()
        if c.system("./out") != 0
            c.exit(1)
        let run_end_time: I64 = os.time()

        c.printf("\033[93mRunning %s...\033[0m %ldms\n", x, run_end_time - run_start_time)

func main[] : I64
    c.system("cargo build --release")

    let files: Array = os.listdir("examples/")
    for i in 0..array.size(files)
        run_test(files[i])